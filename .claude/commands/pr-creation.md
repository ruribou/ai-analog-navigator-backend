# pr-creation

## 目的
現在のブランチの変更内容を確認し、GitHub CLIを使ってPull Requestを作成する際に、レビュアーが理解しやすい説明文を自動生成する。

## 引数
`/pr-creation`

## 実行フロー

### 1. 変更内容の確認
- `git status` でブランチ状態を確認
- `git diff main` または `git diff origin/main` で変更差分を確認
- 変更されたファイル一覧を把握し、変更の影響範囲を理解する

### 2. 関連情報の収集
- 現在のブランチ名から関連するTask/Planファイルを探索
- Task文書があれば、その内容（目的、完了ステップ、検証結果）を読み込む
- 関連するIssue番号を特定（ブランチ名やコミットメッセージから）

### 3. PR説明文の生成
以下の構成でPR本文を生成する：

```markdown
## 変更の概要
[1-2文で変更内容を簡潔に説明]

## 変更の理由/背景
- この変更が必要になった背景や課題
- 解決したい問題や追加したい機能の説明
- 関連するPlan/Task文書へのリンク

## 主な変更点
- [ ] 変更点1: [ファイル名](相対パス) - 説明
- [ ] 変更点2: [ファイル名](相対パス) - 説明
- [ ] 変更点3: [ファイル名](相対パス) - 説明

## テスト方法
### バックエンド
```bash
make test-backend
# または
cd backend && pytest
```

### フロントエンド
```bash
cd frontend && npm run test
```

### 手動テスト
1. [具体的なテスト手順]
2. [確認する動作や結果]

## 関連Issue
- Closes #[issue番号]
- Related to #[issue番号]

## レビュー観点
- [ ] コードの可読性と保守性
- [ ] テストカバレッジの充実度
- [ ] パフォーマンスへの影響
- [ ] セキュリティ上の懸念事項

## 備考
[追加の注意事項やフォローアップが必要な項目]

### 4. PRの作成
生成した説明文を使用して、以下のコマンドでPRを作成：

```bash
gh pr create \
  --title "[適切なタイトル]" \
  --body "$(cat /path/to/generated-pr-body.md)" \
  --base main \
  --head <current-branch>
```

または、対話形式で：
```bash
gh pr create --web
```

### 5. 最終確認事項
- [ ] すべての変更がコミットされている
- [ ] リモートブランチにプッシュ済み
- [ ] テストが通過している
- [ ] PRタイトルが明確で分かりやすい
- [ ] レビュアーがアサインされている

## 注意事項
- 変更が大きい場合は、スクリーンショットやデモ動画を添付することを推奨
- 破壊的変更がある場合は、マイグレーション手順やバージョンアップ方法を明記
- Taskが未完了またはVerification未実施の場合は、PR作成を保留し必要な作業を列挙
- セキュリティに関わる変更の場合は、プライベートなコミュニケーションチャネルでレビューすることを検討

